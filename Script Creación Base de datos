create sequence messages_messageid_seq
;

create sequence conversations_conversationid_seq
;

create table users
(
	userid varchar(50) not null
		constraint users_pkey
			primary key
)
;

create table conversations
(
	conversationid serial not null
		constraint conversations_pkey
			primary key
)
;

create table messages
(
	messageid serial not null
		constraint messages_pkey
			primary key,
	userid varchar(50) not null
		constraint messages_userid_fkey
			references users,
	conversationid integer not null
		constraint messages_conversationid_fkey
			references conversations
)
;

create table textmessages
(
	messageid integer not null
		constraint textmessages_pkey
			primary key
		constraint textmessages_messageid_fkey
			references messages,
	message text not null
)
;

create table globalconversations
(
	conversationid integer not null
		constraint globalconversations_pkey
			primary key
		constraint globalconversations_conversationid_fkey
			references conversations
)
;

create table audiomessages
(
	messageid integer not null
		constraint audiomessage_pkey
			primary key
		constraint messageid___fk
			references messages,
	message text not null
)
;

create unique index audiomessage_messageid_uindex
	on audiomessages (messageid)
;

create table imagemessages
(
	messageid integer not null
		constraint imagemessages_messages_messageid_fk
			references messages,
	message text not null
)
;

create unique index imagemessages_messageid_uindex
	on imagemessages (messageid)
;


